metadata:
  name: strucke_test
  type: shapeshifter-project
  description: Project for strucke_test
  version: 1.0.0
  default_entity:
entities:
  excel_sheet:
    type: xlsx
    keys: []
    columns:
    - system_id
    - socken
    - by_gard
    - raa_nummer
    - fornlamningstyp
    - lamningsnr
    - uppdragsnummer
    - landskap_id
    - labnr
    - c14_alder
    - c14_stdav
    - c13
    - modern
    - kommentar
    - bedomd_relevant
    - sort
    - art_1
    - art_2
    - anlnr
    - anlaggning
    - forfattare
    - titel
    - tidskrift
    - forlagsort
    - kommentar_sl
    - lst_dnr
    - linked_lamningsnr
    - linked_lamningtyp
    - linked_latitude
    - linked_longitude
    - linked_lan
    - linked_kommun
    - linked_socken
    surrogate_id: excel_sheet_id
    options:
      filename: projects/strukke_allaC14_230316_v4_clean.xlsx
      sheet_name: samples_with_coords
  site:
    type: entity
    keys: []
    columns:
    - system_id
    - public_id
    - by_gard
    - raa_nummer
    - socken
    public_id: site_id
    source: excel_sheet
    depends_on:
    - excel_sheet
    drop_duplicates: true
  location:
    type: entity
    keys: []
    columns:
    - system_id
    - location_id
    - by_gard
    - landskap_id
    - linked_kommun
    - linked_socken
    public_id: location_id
    source: excel_sheet
    foreign_keys:
    - entity: location_type
      local_keys:
      - location_type
      remote_keys:
      - location_type
      how: inner
      constraints:
        cardinality: many_to_one
        require_unique_left: false
        allow_null_keys: false
    drop_duplicates: true
    unnest:
      id_vars: [system_id, location_id]
      value_vars:
      - by_gard
      - landskap_id
      - linked_kommun
      - linked_socken
      var_name: location_type
      value_name: location_name
  location_type:
    type: fixed
    keys: []
    columns:
    - system_id
    - location_type_id
    - location_type
    public_id: location_type_id
    values:
    - - 1
      - 
      - by_gard
    - - 2
      - 
      - linked_socken
    - - 3
      - 
      - linked_kommun
    - - 4
      - 
      - landskap_id
options: {}
